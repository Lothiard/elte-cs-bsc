<html>
<head>
<title>~/ftp/x/date.cpp.html</title>
<meta name="Generator" content="Vim/6.1">
</head>
<body bgcolor="#e5e5e5" text="#000000">
<pre>
<font color="#a020f0">#include </font><span style="background-color: #f2f2f2"><font color="#ff00ff">&lt;iostream&gt;</font></span>
<font color="#a020f0">#include </font><span style="background-color: #f2f2f2"><font color="#ff00ff">&lt;cstring&gt;</font></span>
<font color="#a020f0">#include </font><span style="background-color: #f2f2f2"><font color="#ff00ff">&lt;cstdlib&gt;</font></span>

<font color="#a020f0">#include </font><span style="background-color: #f2f2f2"><font color="#ff00ff">&quot;date.h&quot;</font></span>

<font color="#a52a2a"><b>using</b></font> <font color="#2e8b57"><b>namespace</b></font> std;

<font color="#0000ff">/*</font><font color="#0000ff"> konstruktor */</font>
date::date( <font color="#2e8b57"><b>const</b></font> <font color="#2e8b57"><b>char</b></font> *s)
{
    <font color="#0000ff">/*</font><font color="#0000ff"> strchr és strrchr a &lt;cstring&gt;-bõl */</font>
    <font color="#2e8b57"><b>char</b></font> *p1 = strchr( s, <span style="background-color: #f2f2f2"><font color="#ff00ff">'.'</font></span>);
    <font color="#2e8b57"><b>char</b></font> *p2 = strrchr( s, <span style="background-color: #f2f2f2"><font color="#ff00ff">'.'</font></span>);

    <font color="#a52a2a"><b>if</b></font> ( p1 &amp;&amp; p2 &amp;&amp; p1 != p2 )
    {
        <font color="#0000ff">/*</font><font color="#0000ff"> atoi a &lt;cstdlib&gt;-bõl&gt; */</font>
        <font color="#2e8b57"><b>int</b></font> y = atoi(s);
        <font color="#2e8b57"><b>int</b></font> m = atoi(p1+<span style="background-color: #f2f2f2"><font color="#ff00ff">1</font></span>);
        <font color="#2e8b57"><b>int</b></font> d = atoi(p2+<span style="background-color: #f2f2f2"><font color="#ff00ff">1</font></span>);

        set( y, m, d);
    }
}

<font color="#0000ff">/*</font><font color="#0000ff"> módosítók */</font>
date&amp; date::next()
{
    <font color="#2e8b57"><b>static</b></font> <font color="#2e8b57"><b>int</b></font> day_in_month[] =
              { <span style="background-color: #f2f2f2"><font color="#ff00ff">31</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">28</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">31</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">30</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">31</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">30</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">31</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">31</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">30</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">31</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">30</font></span>, <span style="background-color: #f2f2f2"><font color="#ff00ff">31</font></span> };
    ++day;

    <font color="#0000ff">/*</font><font color="#0000ff"> </font><span style="background-color: #ffff00"><font color="#0000ff">TODO</font></span><font color="#0000ff">: szökõév */</font>
    <font color="#a52a2a"><b>if</b></font> ( day-<span style="background-color: #f2f2f2"><font color="#ff00ff">1</font></span> == day_in_month[month-<span style="background-color: #f2f2f2"><font color="#ff00ff">1</font></span>])
    {
        day = <span style="background-color: #f2f2f2"><font color="#ff00ff">1</font></span>;
        ++month;
    }
    <font color="#a52a2a"><b>if</b></font> ( <span style="background-color: #f2f2f2"><font color="#ff00ff">13</font></span> == month )
    {
        month = <span style="background-color: #f2f2f2"><font color="#ff00ff">1</font></span>;
        ++year;
    }
    <font color="#a52a2a"><b>return</b></font> *<font color="#a52a2a"><b>this</b></font>;
}
date&amp; date::add( <font color="#2e8b57"><b>int</b></font> n)
{
    <font color="#a52a2a"><b>for</b></font> (<font color="#2e8b57"><b>int</b></font> i = <span style="background-color: #f2f2f2"><font color="#ff00ff">0</font></span>; i &lt; n; ++i)
        next();
    <font color="#a52a2a"><b>return</b></font> *<font color="#a52a2a"><b>this</b></font>;
}

<font color="#0000ff">/*</font><font color="#0000ff"> input-output */</font>
<font color="#2e8b57"><b>void</b></font> date::get( std::istream&amp; is)
{
    <font color="#0000ff">// nem lenne igazán jó:</font>
    <font color="#0000ff">// is &gt;&gt; year &gt;&gt; month &gt;&gt; day;</font>
    <font color="#2e8b57"><b>int</b></font> y, m, d;
    <font color="#a52a2a"><b>if</b></font> ( is &gt;&gt; y &gt;&gt; m &gt;&gt; d )
    {
        set( y, m, d);
    }
}
<font color="#2e8b57"><b>void</b></font> date::put( std::ostream&amp; os) <font color="#2e8b57"><b>const</b></font>
{
    <font color="#0000ff">// nem lenne igazán jó: os &lt;&lt; year &lt;&lt; month &lt;&lt; day;</font>
    os &lt;&lt; <span style="background-color: #f2f2f2"><font color="#ff00ff">&quot;[ &quot;</font></span> &lt;&lt; get_year() &lt;&lt; <span style="background-color: #f2f2f2"><font color="#ff00ff">&quot;,&quot;</font></span> &lt;&lt; get_month()
                             &lt;&lt; <span style="background-color: #f2f2f2"><font color="#ff00ff">&quot;,&quot;</font></span> &lt;&lt; get_day() &lt;&lt; <span style="background-color: #f2f2f2"><font color="#ff00ff">&quot; ]&quot;</font></span>;
}

<font color="#0000ff">/*</font><font color="#0000ff"> globális mûveletek */</font>
<font color="#2e8b57"><b>bool</b></font> <font color="#a52a2a"><b>operator</b></font>&lt;( date d1, date d2)
{
    <font color="#a52a2a"><b>return</b></font> d1.get_year() &lt; d2.get_year()  ||
           d1.get_year() == d2.get_year() &amp;&amp; d1.get_month() &lt; d2.get_month()  ||
           d1.get_year() == d2.get_year() &amp;&amp; d1.get_month() == d2.get_month()
                                          &amp;&amp; d1.get_day() &lt; d2.get_day();

}
istream&amp; <font color="#a52a2a"><b>operator</b></font>&gt;&gt;( istream&amp; is, date&amp; d)
{
    d.get( is);
    <font color="#a52a2a"><b>return</b></font> is;
}
ostream&amp; <font color="#a52a2a"><b>operator</b></font>&lt;&lt;( ostream&amp; os, <font color="#2e8b57"><b>const</b></font> date &amp;d)
{
    d.put( os);
    <font color="#a52a2a"><b>return</b></font> os;
}


</pre>
</body>
</html>
